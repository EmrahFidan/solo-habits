/* ==========================================================================
   SKELETON LOADER COMPONENT - ENHANCED RESPONSIVE & MODERN
   ========================================================================== */

:root {
  /* Loader specific variables */
  --loader-cell-size: clamp(35px, 8vw, 55px);
  --loader-cell-spacing: clamp(1px, 0.3vw, 2px);
  --loader-cells: 3;
  --loader-total-size: calc(var(--loader-cells) * (var(--loader-cell-size) + 2 * var(--loader-cell-spacing)));
  
  /* Animation variables */
  --ripple-duration: 0.6s;
  --ripple-delay-step: 80ms;
  
  /* Color palette */
  --loader-bg: linear-gradient(135deg, #0a0616 0%, #1a1a3e 50%, #16213e 100%);
  --loader-text-color: rgba(255, 255, 255, 0.9);
  
  /* Purple color palette */
  --cell-color-1: #8B5CF6;
  --cell-color-2: #A855F7;
  --cell-color-3: #C084FC;
  --cell-color-4: #DDD6FE;
  --cell-color-5: #667eea;
  --cell-color-6: #764ba2;
  --cell-color-7: #ff9ff3;
  --cell-color-8: #f093fb;
  --cell-color-9: #fecfef;
}

/* ==========================================================================
   CONTAINER STYLES - RESPONSIVE
   ========================================================================== */

.skeleton-container {
  background: var(--loader-bg);
  min-height: 100vh;
  width: 100vw;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  gap: clamp(1rem, 4vw, 2rem);
  padding: clamp(1rem, 4vw, 2rem);
  box-sizing: border-box;
  position: relative;
  overflow: hidden;
}

/* Background enhancement */
.skeleton-container::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: 
    radial-gradient(circle at 20% 80%, rgba(139, 92, 246, 0.1) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(168, 85, 247, 0.08) 0%, transparent 50%),
    radial-gradient(circle at 40% 40%, rgba(192, 132, 252, 0.06) 0%, transparent 50%);
  animation: backgroundFloat 8s ease-in-out infinite;
  pointer-events: none;
}

@keyframes backgroundFloat {
  0%, 100% { 
    opacity: 0.3;
    transform: scale(1) rotate(0deg);
  }
  50% { 
    opacity: 0.6;
    transform: scale(1.05) rotate(1deg);
  }
}

/* ==========================================================================
   LOADER STYLES - ENHANCED
   ========================================================================== */

.loader {
  --cell-size: var(--loader-cell-size);
  --cell-spacing: var(--loader-cell-spacing);
  --cells: var(--loader-cells);
  --total-size: var(--loader-total-size);
  
  display: flex;
  flex-wrap: wrap;
  width: var(--total-size);
  height: var(--total-size);
  position: relative;
  z-index: 1;
  justify-content: center;
  align-items: center;
  gap: var(--cell-spacing);
}

/* Enhanced grid layout */
.loader::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: calc(100% + 20px);
  height: calc(100% + 20px);
  background: radial-gradient(circle, rgba(139, 92, 246, 0.1) 0%, transparent 70%);
  border-radius: 50%;
  animation: loaderGlow 2s ease-in-out infinite;
  pointer-events: none;
}

@keyframes loaderGlow {
  0%, 100% { 
    opacity: 0.3;
    transform: translate(-50%, -50%) scale(1);
  }
  50% { 
    opacity: 0.6;
    transform: translate(-50%, -50%) scale(1.1);
  }
}

/* ==========================================================================
   CELL STYLES - ENHANCED
   ========================================================================== */

.cell {
  flex: 0 0 var(--cell-size);
  width: var(--cell-size);
  height: var(--cell-size);
  background-color: transparent;
  box-sizing: border-box;
  border-radius: clamp(4px, 1vw, 8px);
  position: relative;
  overflow: hidden;
  animation: ripple var(--ripple-duration) ease infinite;
  transition: transform 0.3s ease;
}

/* Enhanced cell structure */
.cell::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(45deg, 
    transparent 30%, 
    rgba(255, 255, 255, 0.1) 50%, 
    transparent 70%);
  opacity: 0;
  animation: shimmer 1.5s ease-in-out infinite;
}

@keyframes shimmer {
  0%, 100% { 
    opacity: 0;
    transform: translateX(-100%);
  }
  50% { 
    opacity: 1;
    transform: translateX(100%);
  }
}

/* Hover effects for interactive feel */
.cell:hover {
  transform: scale(1.05);
  animation-duration: calc(var(--ripple-duration) * 0.8);
}

/* Animation delays */
.cell.d-0 { animation-delay: 0ms; }
.cell.d-1 { animation-delay: calc(var(--ripple-delay-step) * 1); }
.cell.d-2 { animation-delay: calc(var(--ripple-delay-step) * 2); }
.cell.d-3 { animation-delay: calc(var(--ripple-delay-step) * 3); }
.cell.d-4 { animation-delay: calc(var(--ripple-delay-step) * 4); }
.cell.d-5 { animation-delay: calc(var(--ripple-delay-step) * 5); }
.cell.d-6 { animation-delay: calc(var(--ripple-delay-step) * 6); }
.cell.d-7 { animation-delay: calc(var(--ripple-delay-step) * 7); }
.cell.d-8 { animation-delay: calc(var(--ripple-delay-step) * 8); }

/* Enhanced color system */
.cell:nth-child(1) { --cell-color: var(--cell-color-1); }
.cell:nth-child(2) { --cell-color: var(--cell-color-2); }
.cell:nth-child(3) { --cell-color: var(--cell-color-3); }
.cell:nth-child(4) { --cell-color: var(--cell-color-4); }
.cell:nth-child(5) { --cell-color: var(--cell-color-5); }
.cell:nth-child(6) { --cell-color: var(--cell-color-6); }
.cell:nth-child(7) { --cell-color: var(--cell-color-7); }
.cell:nth-child(8) { --cell-color: var(--cell-color-8); }
.cell:nth-child(9) { --cell-color: var(--cell-color-9); }

/* ==========================================================================
   LOADING TEXT - ENHANCED
   ========================================================================== */

.loading-text {
  color: var(--loader-text-color);
  font-size: clamp(0.875rem, 3.5vw, 1.25rem);
  opacity: 0.9;
  text-align: center;
  font-weight: 500;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  letter-spacing: 0.02em;
  line-height: 1.4;
  position: relative;
  z-index: 1;
  animation: textPulse 2s ease-in-out infinite;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}

@keyframes textPulse {
  0%, 100% { 
    opacity: 0.9;
    transform: translateY(0);
  }
  50% { 
    opacity: 1;
    transform: translateY(-1px);
  }
}

/* Enhanced loading text with dots animation */
.loading-text::after {
  content: '';
  animation: dots 1.5s infinite;
}

@keyframes dots {
  0%, 20% { content: ''; }
  40% { content: '.'; }
  60% { content: '..'; }
  80%, 100% { content: '...'; }
}

/* ==========================================================================
   ENHANCED RIPPLE ANIMATION
   ========================================================================== */

@keyframes ripple {
  0% {
    background-color: transparent;
    box-shadow: 0 0 0 rgba(var(--cell-color), 0);
    transform: scale(1);
  }
  15% {
    background-color: var(--cell-color);
    box-shadow: 0 0 20px rgba(var(--cell-color), 0.3);
    transform: scale(1.05);
  }
  30% {
    background-color: var(--cell-color);
    box-shadow: 0 0 25px rgba(var(--cell-color), 0.5);
    transform: scale(1.1);
  }
  60% {
    background-color: rgba(var(--cell-color), 0.7);
    box-shadow: 0 0 15px rgba(var(--cell-color), 0.2);
    transform: scale(1.02);
  }
  100% {
    background-color: transparent;
    box-shadow: 0 0 0 rgba(var(--cell-color), 0);
    transform: scale(1);
  }
}

/* ==========================================================================
   RESPONSIVE BREAKPOINTS
   ========================================================================== */

/* Extra small devices (max 575px) */
@media (max-width: 575px) {
  :root {
    --loader-cell-size: clamp(28px, 12vw, 40px);
    --loader-cell-spacing: 1px;
    --ripple-delay-step: 60ms;
  }

  .skeleton-container {
    gap: 1rem;
    padding: 1rem;
  }

  .loading-text {
    font-size: clamp(0.8rem, 4vw, 1rem);
    padding: 0 1rem;
  }

  .cell {
    border-radius: 4px;
  }

  .loader::before {
    width: calc(100% + 15px);
    height: calc(100% + 15px);
  }
}

/* Small devices (576px - 767px) */
@media (min-width: 576px) and (max-width: 767px) {
  :root {
    --loader-cell-size: clamp(35px, 10vw, 45px);
    --loader-cell-spacing: 1.5px;
  }

  .skeleton-container {
    gap: 1.25rem;
  }

  .loading-text {
    font-size: clamp(0.9rem, 3.5vw, 1.1rem);
  }
}

/* Medium devices (768px - 991px) */
@media (min-width: 768px) and (max-width: 991px) {
  :root {
    --loader-cell-size: clamp(40px, 8vw, 50px);
    --loader-cell-spacing: 2px;
  }

  .skeleton-container {
    gap: 1.5rem;
  }
}

/* Large devices (992px and up) */
@media (min-width: 992px) {
  :root {
    --loader-cell-size: clamp(45px, 6vw, 60px);
    --loader-cell-spacing: 2px;
    --ripple-delay-step: 100ms;
  }

  .skeleton-container {
    gap: 2rem;
  }

  .cell:hover {
    transform: scale(1.08);
  }
}

/* Extra large devices (1400px and up) */
@media (min-width: 1400px) {
  :root {
    --loader-cell-size: 55px;
    --loader-cell-spacing: 2px;
  }

  .loading-text {
    font-size: 1.25rem;
  }
}

/* ==========================================================================
   LANDSCAPE ORIENTATION
   ========================================================================== */

@media (orientation: landscape) and (max-height: 600px) {
  .skeleton-container {
    flex-direction: row;
    gap: clamp(1rem, 4vw, 3rem);
    align-items: center;
    justify-content: center;
  }

  :root {
    --loader-cell-size: clamp(25px, 6vw, 40px);
    --loader-cell-spacing: 1px;
  }

  .loading-text {
    font-size: clamp(0.8rem, 3vw, 1rem);
    writing-mode: vertical-rl;
    text-orientation: mixed;
  }
}

/* ==========================================================================
   HIGH DPI DISPLAYS
   ========================================================================== */

@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  .cell {
    border-radius: clamp(6px, 1.5vw, 10px);
  }

  .loading-text {
    text-shadow: 0 0.5px 1px rgba(0, 0, 0, 0.3);
  }
}

/* ==========================================================================
   ACCESSIBILITY & PERFORMANCE
   ========================================================================== */

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .cell,
  .loading-text,
  .skeleton-container::before,
  .loader::before,
  .cell::before {
    animation: none !important;
  }

  .cell:hover {
    transform: none;
  }

  .loading-text::after {
    content: '...';
    animation: none;
  }

  /* Simple fade alternative for reduced motion */
  .cell {
    animation: simpleFade 2s ease-in-out infinite;
  }

  @keyframes simpleFade {
    0%, 100% { opacity: 0.3; }
    50% { opacity: 1; }
  }
}

/* High contrast mode */
@media (prefers-contrast: high) {
  :root {
    --loader-text-color: #ffffff;
    --cell-color-1: #ffffff;
    --cell-color-2: #e0e0e0;
    --cell-color-3: #cccccc;
    --cell-color-4: #b8b8b8;
    --cell-color-5: #a4a4a4;
    --cell-color-6: #909090;
    --cell-color-7: #7c7c7c;
    --cell-color-8: #686868;
    --cell-color-9: #545454;
  }

  .skeleton-container {
    background: #000000;
  }

  .cell {
    border: 1px solid rgba(255, 255, 255, 0.3);
  }
}

/* Focus management for accessibility */
.skeleton-container:focus {
  outline: 2px solid rgba(139, 92, 246, 0.8);
  outline-offset: 4px;
}

/* ==========================================================================
   CONTAINER QUERIES (Future-proofing)
   ========================================================================== */

@supports (container-type: inline-size) {
  .skeleton-container {
    container-type: inline-size;
  }

  @container (max-width: 400px) {
    :root {
      --loader-cell-size: 30px;
      --loader-cell-spacing: 1px;
    }

    .loading-text {
      font-size: 0.875rem;
    }
  }

  @container (min-width: 800px) {
    :root {
      --loader-cell-size: 60px;
      --loader-cell-spacing: 3px;
    }

    .loading-text {
      font-size: 1.25rem;
    }
  }
}

/* ==========================================================================
   PERFORMANCE OPTIMIZATIONS
   ========================================================================== */

.loader {
  will-change: transform;
  contain: layout style paint;
}

.cell {
  will-change: background-color, transform;
  contain: layout style paint;
}

.skeleton-container::before,
.loader::before {
  will-change: opacity, transform;
}

/* GPU acceleration hints */
.cell,
.skeleton-container::before,
.loader::before {
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* ==========================================================================
   DARK MODE VARIATIONS
   ========================================================================== */

@media (prefers-color-scheme: light) {
  :root {
    --loader-bg: linear-gradient(135deg, #f0f4f8 0%, #e2e8f0 50%, #cbd5e0 100%);
    --loader-text-color: rgba(45, 55, 72, 0.9);
  }

  .skeleton-container::before {
    background: 
      radial-gradient(circle at 20% 80%, rgba(139, 92, 246, 0.05) 0%, transparent 50%),
      radial-gradient(circle at 80% 20%, rgba(168, 85, 247, 0.04) 0%, transparent 50%);
  }
}

/* ==========================================================================
   PRINT STYLES
   ========================================================================== */

@media print {
  .skeleton-container {
    background: white;
    color: black;
    min-height: auto;
    height: 200px;
    page-break-inside: avoid;
  }

  .cell {
    background-color: #cccccc !important;
    animation: none;
  }

  .loading-text {
    color: black;
    font-size: 1rem;
  }

  .skeleton-container::before,
  .loader::before,
  .cell::before {
    display: none;
  }
}

/* ==========================================================================
   ERROR STATES & FALLBACKS
   ========================================================================== */

/* Fallback for older browsers */
@supports not (display: flex) {
  .loader {
    display: block;
    text-align: center;
  }

  .cell {
    display: inline-block;
    margin: var(--cell-spacing);
  }
}

/* Fallback for browsers without CSS custom properties */
@supports not (--css: variables) {
  .loader {
    width: 180px;
    height: 180px;
  }

  .cell {
    width: 50px;
    height: 50px;
    margin: 2px;
  }

  .loading-text {
    font-size: 18px;
  }
}